
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Ruslan Osipov</title>
  <meta name="author" content="Ruslan Osipov">

  
  <meta name="description" content="You can open previous location by hitting Ctrl-O. You can prefix the command
with a number to go multiple files back. You can also travel forward in &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.rosipov.com/posts/6">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Ruslan Osipov" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-48506044-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Ruslan Osipov</a></h1>
  
    <h2>Thoughts on software development</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.rosipov.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/about/">About</a></li>
  <li><a href="/blog/archive/">Archive</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/open-previously-edited-file-in-vim/">Open previously edited file in vim</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-11-24T16:39:34-08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:39 pm</span></time>
        
           | <a href="/blog/open-previously-edited-file-in-vim/#disqus_thread"
             data-disqus-identifier="http://www.rosipov.com/blog/open-previously-edited-file-in-vim/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>You can open previous location by hitting <code>Ctrl-O</code>. You can prefix the command
with a number to go multiple files back. You can also travel forward in &ldquo;file
history&rdquo; by using <code>Ctrl-I</code>.</p>

<p>There&rsquo;s a nice article on <a href="http://vim.wikia.com/wiki/Jumping_to_previously_visited_locations">Vim Wikia</a> with more details on a subject.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/old-file-version-in-split-with-vim/">Old file version in split with vim</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-11-23T20:14:19-08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2013</span></span> <span class='time'>8:14 pm</span></time>
        
           | <a href="/blog/old-file-version-in-split-with-vim/#disqus_thread"
             data-disqus-identifier="http://www.rosipov.com/blog/old-file-version-in-split-with-vim/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you use git VCS, you can view previous version of the file you are currently
editing in a split window by executing following command:</p>

<pre><code>:vsp tmp | read !git show HEAD^:path/from/working/directory
</code></pre>

<p>For the instant syntax highlighting, you can specify temporary file&rsquo;s
extension, like following:</p>

<pre><code>:vsp tmp.py | read !git show HEAD^:lib/module.py
</code></pre>

<p>You can also cycle back by few versions by replacing <code>HEAD^</code> (which points to
the previous commit) with <code>HEAD~N</code>, where <code>N</code> is the number of commits you
would like to go back in history by. For example, if you would like to get a
version of the file 4 commits ago - you can do so by executing following
command:</p>

<pre><code>:vsp tmp | read !git show HEAD~4:path/from/working/directory
</code></pre>

<p>It&rsquo;s a pretty nice hack when you need to quickly view previous version of the
file you are working on.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/pasting-with-vim-and-indentation-issues/">Pasting with vim and indentation issues</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-11-16T17:02:30-08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>5:02 pm</span></time>
        
           | <a href="/blog/pasting-with-vim-and-indentation-issues/#disqus_thread"
             data-disqus-identifier="http://www.rosipov.com/blog/pasting-with-vim-and-indentation-issues/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you use vim often - you probably had to paste something into vim from the
outside source. And, if you have corresponding indentation rules, they will get
applied, turning your nice block of code into something that looks more like a
case of stairs:</p>

<pre><code>def foo(a, b):
        a, b = b, a
            print "I am doing something important."
                return a - b
</code></pre>

<p>Quite nasty, isn&rsquo;t it? But that&rsquo;s where vim&rsquo;s <code>paste</code> option comes in.  Before
pasting, execute <code>:set paste</code>. If you go into insert mode, you&rsquo;ll see the usual
mode indicator switch to <code>-- INSERT (paste) --</code>. Try pasting the same block of
code now:</p>

<pre><code>def foo(a, b):
    a, b = b, a
    print "I am doing something important."
    return a - b
</code></pre>

<p>Beautiful. Don&rsquo;t forget to switch back to a regular mode by executing <code>:set
nopaste</code>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/remap-your-caps-lock/">Remap your Caps Lock</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-09-11T18:26:15-07:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>6:26 pm</span></time>
        
           | <a href="/blog/remap-your-caps-lock/#disqus_thread"
             data-disqus-identifier="http://www.rosipov.com/blog/remap-your-caps-lock/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The following three paragraphs are an angry <code>Caps Lock</code> rant. Feel free to skip
past it or join me by commenting below.</p>

<p>I&rsquo;ve had it with <code>Caps Lock</code>! How many times did I accidentally press it while
hitting the <code>A</code> key! How many times did I mean <code>Tab</code> or <code>Shift</code>! There is an
obvious problem with the <code>Caps Lock</code> placement, and there being only a
millimeter of space to designate it from an adjacent key, it is quite difficult
to notice when you accidentally press it.</p>

<p>Pushing <code>Caps Lock</code> is more tolerable when typing, but while using keyboard
controlled software it&rsquo;s a real pain; <code>vim</code> turns into a beeping ravaging
nightmare, <code>vimperator</code> messes up all your bookmarks&hellip; Same thing with
websites supporting keyboard shortcuts.</p>

<p>When was the last time I ever used <code>Caps Lock</code>? Over ten years ago, when I was
playing a video game that used <code>Caps Lock</code> to switch between running and
walking. Em&hellip; Seriously? Time to put an end this nonsense.</p>

<h2>Linux and Mac</h2>

<p>Drop this into your <code>~/bin/capslockremap</code>, and don&rsquo;t forget to <code>chmod +x
~/bin/capslockremap</code>. Now run the script with root privileges (that&rsquo;ll last you
until the next restart).</p>

<pre><code>#!/bin/sh

# This temporarily remaps the Caps Lock key to a Control key.
# The keyboard will return to the previous settings after a
# reboot. The Linux console and the X Window system each
# handles keypresses separately, so each must be remapped
# separately. First remap the X keyboard since this does not
# require root access.

# Remap the Caps Lock key to a Control key for
# the X Window system.
if type setxkbmap &gt;/dev/null 2&gt;&amp;1; then
fi

# You have to be root to remap the console keyboard.
if [ "$(id -u)" != "0" ]; then
  echo "This script is not running as root so"
  echo "the console Caps Lock cannot be remapped."
  echo "Perhaps you forgot to run this under sudo."
  echo "Note that this problem does not effect X."
  echo "This only effects the consoles running on"
  echo "Alt-f1 through Alt-f6."
  exit 2
fi
# Remap the CapsLock key to a Control key for the console.
(dumpkeys | grep keymaps; echo "keycode 58 = Control") | loadkeys
</code></pre>

<h2>Windows</h2>

<p>Download <a href="http://technet.microsoft.com/en-us/sysinternals/bb897578.aspx">Sysinternals Ctrl2Cap v2.0</a>, run it as Administrator with
<code>install</code> flag: <code>ctrl2cap.exe /install</code>.</p>

<p>Source <a href="http://www.noah.org/wiki/CapsLock_Remap_Howto">CapsLock Remap Howto - Noah.org</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/python-doctests-and-decorators-bug/">Python doctests and decorators bug</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-07-22T07:57:29-07:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2013</span></span> <span class='time'>7:57 am</span></time>
        
           | <a href="/blog/python-doctests-and-decorators-bug/#disqus_thread"
             data-disqus-identifier="http://www.rosipov.com/blog/python-doctests-and-decorators-bug/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Now, this as well might be a feature, but doctest strings are not being
executed for decorated functions (at least in version 2.7). However, there is a
workaround.</p>

<p>You need to decorate your functions with <code>functools.wraps</code> within a decorator
to import docstrings into a decorator scope.</p>

<pre><code>#!/usr/bin/env python

from functools import wraps

def decorator(func):
    @wraps(func)
    def wrapper():
        return func()
    return wrapper

@decorator
def foo():
    """
    &gt;&gt;&gt; foo()
    False
    """
    return True

import doctest
doctest.testmod()
</code></pre>

<p>Now you can see this test failing, where otherwise it would have been ignored:</p>

<pre><code>**********************************************************************
File "decorator.py", line 12, in __main__.foo
Failed example:
    foo()
Expected:
    False
Got:
    True
**********************************************************************
1 items had failures:
   1 of   1 in __main__.foo
***Test Failed*** 1 failures.
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/7">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/5">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/750-words-a-day/">750 words a day</a>
      </li>
    
      <li class="post">
        <a href="/blog/beyond-grep/">Beyond grep</a>
      </li>
    
      <li class="post">
        <a href="/blog/effective-search-with-mutt/">Effective search with Mutt</a>
      </li>
    
      <li class="post">
        <a href="/blog/one-more-argument-for-80-character-limit/">One more argument for 80 character limit</a>
      </li>
    
      <li class="post">
        <a href="/blog/three-favorite-bash-tricks/">Three favorite bash tricks</a>
      </li>
    
      <li class="post">
        <a href="/blog/distraction-free-writing-with-vimroom/">Distraction-free writing with VimRoom</a>
      </li>
    
      <li class="post">
        <a href="/blog/abandoning-wordpress-for-octopress/">Abandoning WordPress for Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/the-pragmatic-programmer/">&#8220;The Pragmatic Programmer&#8221;</a>
      </li>
    
      <li class="post">
        <a href="/blog/personal-wiki-with-vimwiki/">Personal wiki with vimwiki</a>
      </li>
    
      <li class="post">
        <a href="/blog/easy-commenting-with-tcomment-vim/">Easy commenting with tcomment.vim</a>
      </li>
    
  </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Ruslan Osipov -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rosipov';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
